<Window x:Class="UnfuckMyTime.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="UnfuckMyTime" Height="600" Width="900"
        Background="#1E1E1E" Foreground="#DDDDDD"
        Closing="Window_Closing">
    
    <Grid Margin="20">
        
        <!-- Setup View -->
        <Grid x:Name="SetupView" Visibility="Visible">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Text="What do you want to accomplish?" FontSize="24" FontWeight="Bold" Margin="0,0,0,10"/>
            
            <!-- API Key Input (Temp) -->
             <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock Text="OpenAI Key:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <PasswordBox x:Name="ApiKeyInput" Width="400" />
            </StackPanel>

            <TextBox x:Name="PromptInput" Grid.Row="2" Height="80" 
                     TextWrapping="Wrap" AcceptsReturn="True" 
                     FontSize="16" Padding="10"
                     Text="Next 5 minutes: finish section 3 of the report. Only VS + docs + Jira allowed + chatgpt. max slack time 5s, reset time 10s" TextChanged="PromptInput_TextChanged"/>

            <Button x:Name="GenerateBtn" Grid.Row="2" HorizontalAlignment="Right" VerticalAlignment="Bottom" 
                    Content="Generate Plan" Margin="10" Padding="10,5" Click="GenerateBtn_Click"/>

            <!-- Plan Preview -->
            <Border Grid.Row="3" Margin="0,20,0,20" BorderBrush="#333" BorderThickness="1" Padding="10" Background="#252526">
                <ScrollViewer>
                    <TextBlock x:Name="PlanPreview" Text="Plan will appear here..." FontFamily="Consolas" FontSize="14"/>
                </ScrollViewer>
            </Border>

            <Button x:Name="StartSessionBtn" Grid.Row="4" 
                    Content="Start Session" FontSize="18" FontWeight="Bold" 
                    HorizontalAlignment="Stretch" Padding="10" Background="#007ACC" Foreground="White"
                    Click="StartSessionBtn_Click" IsEnabled="False"/>
        </Grid>

        <!-- Dashboard View -->
        <Grid x:Name="DashboardView" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                <TextBlock x:Name="CurrentGoalText" Text="Current Goal..." FontSize="20" FontWeight="Bold" Foreground="#007ACC"/>
                <TextBlock x:Name="TimerText" Text="00:00:00" FontSize="20" FontWeight="Bold" Margin="20,0,0,0" Foreground="#AAAAAA"/>
            </StackPanel>

            <TextBox x:Name="LogOutput" Grid.Row="2" IsReadOnly="True" 
                     Background="#111" Foreground="#00FF00" FontFamily="Consolas"
                     VerticalScrollBarVisibility="Auto" TextWrapping="Wrap" Padding="10"/>

            <Button Grid.Row="0" HorizontalAlignment="Right" Content="End Session" Click="EndSessionBtn_Click"/>
        </Grid>
        
        <!-- Loading Overlay -->
         <Grid x:Name="LoadingOverlay" Visibility="Collapsed" Background="#aa000000">
            <TextBlock Text="Thinking..." HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="24" FontWeight="Bold"/>
        </Grid>

    </Grid>
</Window>
